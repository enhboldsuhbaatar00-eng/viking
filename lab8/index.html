<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hangman Game (Fixed)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .game-container {
            background-color: white;
            padding: 20px 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            text-align: center;
            width: 90%;
            max-width: 600px;
        }
        h1 {
            color: #4a4a4a;
            margin-bottom: 20px;
        }
        .hangman-box {
    width: 100%;
    display: flex;
    justify-content: center;
    margin-bottom: 20px;

    height: auto;
    overflow: visible;
}

.hangman-box svg {
    width: 220px;   
    height: 260px;  

    overflow: visible; 
}

        
        .gallows-part, .figure-part {
            fill: transparent;
            stroke: #333;
            stroke-width: 4px;
            stroke-linecap: round;
        }
        .figure-part {
            display: none;
        }
        .question-display {
            font-size: 1.2em;
            margin-bottom: 20px;
            color: #555;
            min-height: 30px;
        }
        .word-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
        }
        .letter {
            width: 30px;
            height: 40px;
            border-bottom: 3px solid #333;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5em;
            font-weight: bold;
            text-transform: uppercase;
        }
        .keyboard {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
        }
        .key {
            padding: 10px 15px;
            font-size: 1em;
            border: none;
            background-color: #87CEEB;
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .key:hover {
            background-color: #4682B4;
        }
        .key:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .start-button, .play-again-button {
            padding: 12px 25px;
            font-size: 1.2em;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
        }
        .popup-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
        }
        .popup {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }
    </style>
</head>
<body>

    <div class="game-container">
        <h1> Eko's Дүүжлүүр Тоглоом</h1>
        
        <div class="hangman-box">
            <svg height="250" width="200" class="hangman-svg">
                <g class="gallows">
                    <line x1="60" y1="210" x2="140" y2="210" class="gallows-part" />
                    <line x1="100" y1="210" x2="100" y2="50" class="gallows-part" />
                    <line x1="100" y1="50" x2="180" y2="50" class="gallows-part" />
                    <line x1="180" y1="50" x2="180" y2="80" class="gallows-part" />
                </g>
                <g class="figure">
                    <circle cx="180" cy="100" r="20" class="figure-part" /> 
                    <line x1="180" y1="120" x2="180" y2="170" class="figure-part" />
                    <line x1="180" y1="130" x2="150" y2="160" class="figure-part" />
                    <line x1="180" y1="130" x2="210" y2="160" class="figure-part" />
                    <line x1="180" y1="170" x2="150" y2="200" class="figure-part" />
                    <line x1="180" y1="170" x2="210" y2="200" class="figure-part" />
                </g>
            </svg>
        </div>

        <div class="question-display">Тоглоом эхлүүлэхийн тулд товчийг дарна уу.</div>

        <div class="word-display"></div>
        <div class="keyboard"></div>

        <button class="start-button">Тоглоом эхлүүлэх</button>
    </div>

    <div class="popup-container" id="popup-container">
        <div class="popup">
            <h2 id="final-message"></h2>
            <h3 id="correct-word"></h3>
            <button class="play-again-button" id="play-again">Дахин тоглох</button>
        </div>
    </div>

<script>

const wordDisplay = document.querySelector('.word-display');
const questionDisplay = document.querySelector('.question-display');
const keyboardDiv = document.querySelector('.keyboard');
const startButton = document.querySelector('.start-button');
const popupContainer = document.getElementById('popup-container');
const finalMessage = document.getElementById('final-message');
const correctWordDisplay = document.getElementById('correct-word');
const playAgainBtn = document.getElementById('play-again');

const questions = [
    'Murun ali aimgiin niislel ve', 
    'Mongoliin hamgiin tom nuur',
    'Zerleg yamaag yu gedeg ve(English)',
    'Hamgiin tom huhtun amitan(English)'
];

const answers = [
    'Huvsgul', 
    'Uvs',
    'Ibex',
    'Whale'
];

let selectedWord = '';
let correctLetters = [];
let wrongGuessCount = 0;
const maxWrongGuesses = 6;

let figureParts = Array.from(document.querySelectorAll('.figure-part'));

const orderedParts = [
    figureParts[0],
    figureParts[1],
    figureParts[2],
    figureParts[3],
    figureParts[4],
    figureParts[5]
];

function startGame() {
    correctLetters = [];
    wrongGuessCount = 0;
    popupContainer.style.display = 'none';

    orderedParts.forEach(part => part.style.display = 'none');

    const randomIndex = Math.floor(Math.random() * questions.length);
    questionDisplay.textContent = questions[randomIndex];
    selectedWord = answers[randomIndex].toUpperCase();

    displayWord();
    generateKeyboard();
    startButton.style.display = 'none';
}

function displayWord() {
    wordDisplay.innerHTML = selectedWord
        .split('')
        .map(letter => `
            <div class="letter">
                ${correctLetters.includes(letter) ? letter : ''}
            </div>
        `)
        .join('');

    const innerWord = wordDisplay.innerText.replace(/\n/g, '');
    if (innerWord === selectedWord) {
        finalMessage.innerText = ' Баяр хүргэе! Та яллаа.';
        correctWordDisplay.innerText = '';
        popupContainer.style.display = 'flex';
    }
}

function generateKeyboard() {
    keyboardDiv.innerHTML = '';
    for (let i = 65; i <= 90; i++) {
        const button = document.createElement('button');
        button.innerText = String.fromCharCode(i);
        button.className = 'key';
        button.addEventListener('click', e => handleGuess(e.target));
        keyboardDiv.appendChild(button);
    }
}

function handleGuess(button) {
    const letter = button.innerText;
    button.disabled = true;

    if (selectedWord.includes(letter)) {
        correctLetters.push(letter);
        displayWord();
    } else {
        wrongGuessCount++;
        updateHangman();
    }
}

function updateHangman() {
    if (wrongGuessCount > 0 && wrongGuessCount <= orderedParts.length) {
        orderedParts[wrongGuessCount - 1].style.display = 'block';
    }

    if (wrongGuessCount === maxWrongGuesses) {
        finalMessage.innerText = ' Харамсалтай! Та ялагдлаа.';
        correctWordDisplay.innerText = `Зөв хариулт: ${selectedWord}`;
        popupContainer.style.display = 'flex';
    }
}

startButton.addEventListener('click', startGame);
playAgainBtn.addEventListener('click', startGame);

</script>


</body>
</html>
