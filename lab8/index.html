<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eko's Дүүжлүүр</title>
    <link rel="stylesheet" href="style.css">
    
</head>

<body>
    

<div class="game-container"  >
    <h1>Eko's Дүүжлүүр Тоглоом</h1>

    <div class="hangman-box" >
        <svg viewBox="0 0 240 260">
            <line x1="60" y1="240" x2="180" y2="240" class="gallows-part"/>
            <line x1="120" y1="240" x2="120" y2="40" class="gallows-part"/>
            <line x1="120" y1="40" x2="200" y2="40" class="gallows-part"/>
            <line x1="200" y1="40" x2="200" y2="70" class="gallows-part"/>

            <circle cx="200" cy="95" r="20" class="figure-part"/>
            <line x1="200" y1="115" x2="200" y2="165" class="figure-part"/>
            <line x1="200" y1="130" x2="170" y2="155" class="figure-part"/>
            <line x1="200" y1="130" x2="230" y2="155" class="figure-part"/>
            <line x1="200" y1="165" x2="175" y2="200" class="figure-part"/>
            <line x1="200" y1="165" x2="225" y2="200" class="figure-part"/>
        </svg>
    </div>

    <div class="question-display">
        Тоглоом эхлүүлэхийн тулд товчийг дарна уу
    </div>
  

    <div class="word-display"></div>
    <div class="keyboard"></div>

    <button class="start-button">Тоглоом эхлүүлэх</button>
</div>

<div class="popup-container" id="popup-container">
    <div class="popup">
        <h2 id="final-message"></h2>
        <h3 id="correct-word"></h3>
        <button class="play-again-button" id="play-again">Дахин тоглох</button>
    </div>
</div>

<script>

const questions = [
    'Мөрөн аль аймгийн төв бэ?',
    'Монголын хамгийн том нуур?',
    'Зэрлэг ямааг юу гэдэг вэ?',
    '20-р зууны манлай монгол бөх хэн бэ?'
];

const answers = [
    'ХӨВСГӨЛ',
    'УВС',
    'ЯНГИР',
    'БАЯНМӨНХ'
];

const mongolianLetters = [
    'А','Б','В','Г','Д','Е','Ё','Ж','З','И','Й',
    'К','Л','М','Н','О','Ө','П','Р','С','Т',
    'У','Ү','Ф','Х','Ц','Ч','Ш','Щ','Ъ','Ы',
    'Ь','Э','Ю','Я'
];


const wordDisplay = document.querySelector('.word-display');
const questionDisplay = document.querySelector('.question-display');
const keyboardDiv = document.querySelector('.keyboard');
const startButton = document.querySelector('.start-button');
const popupContainer = document.getElementById('popup-container');
const finalMessage = document.getElementById('final-message');
const correctWordDisplay = document.getElementById('correct-word');
const playAgainBtn = document.getElementById('play-again');

let selectedWord = '';
let correctLetters = {};
let wrongGuessCount = 0;
let usedWrongLetters = [];


const figureParts = document.querySelectorAll('.figure-part');


function startGame() {
    correctLetters = {};
    wrongGuessCount = 0;
    popupContainer.style.display = 'none';
    figureParts.forEach(p => p.style.display = 'none');
    const index = Math.floor(Math.random() * questions.length);
    questionDisplay.textContent = questions[index];
    selectedWord = answers[index];
    displayWord();
    generateKeyboard();
    startButton.style.display = 'none';
    usedWrongLetters = [];

}

function displayWord() {
    wordDisplay.innerHTML = selectedWord
        .split('')
        .map((letter, index) => `
            <div class="letter">
                ${correctLetters[index] ? letter : ''}
            </div>
        `)
        .join('');

    const openedCount = Object.keys(correctLetters).length;
    if (openedCount === selectedWord.length) {
        finalMessage.innerText = ' Баяр хүргэе! Та яллаа!';
        correctWordDisplay.innerText = '';
        popupContainer.style.display = 'flex';
    }
}


function generateKeyboard() {
    keyboardDiv.innerHTML = '';
    mongolianLetters.forEach(letter => {
        const btn = document.createElement('button');
        btn.innerText = letter;
        btn.className = 'key';
        btn.onclick = () => handleGuess(btn);
        keyboardDiv.appendChild(btn);
    });
}

function handleGuess(btn) {
    const letter = btn.innerText;

    let foundIndex = -1;

    for (let i = 0; i < selectedWord.length; i++) {
        if (selectedWord[i] === letter && !correctLetters[i]) {
            foundIndex = i;
            break;
        }
    }

    if (foundIndex !== -1) {
        correctLetters[foundIndex] = true;
        displayWord();
        return;
    }

    if (!usedWrongLetters.includes(letter)) {
        usedWrongLetters.push(letter);
        wrongGuessCount++;

        if (wrongGuessCount <= figureParts.length) {
            figureParts[wrongGuessCount - 1].style.display = 'block';
        }

        if (wrongGuessCount === figureParts.length) {
            finalMessage.innerText = ' Харамсалтай, та дүүжлэгдсэн';
            correctWordDisplay.innerText = 'Зөв хариулт: ' + selectedWord;
            popupContainer.style.display = 'flex';
        }
    }
}




startButton.addEventListener('click', startGame);

playAgainBtn.addEventListener('click', startGame);

</script>


</body>
</html>
